{% extends 'base.html' %}

{% block title %}{{ travel.source }} to {{ travel.destination }} - Travel Lykkr{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="card travel-detail-card">
            <div class="card-header bg-gradient text-white d-flex justify-content-between align-items-center">
                <h4 class="mb-0">
                    <span class="badge badge-{{ travel.type }} me-2">
                        {% if travel.type == 'flight' %}
                            <i class="fas fa-plane"></i> ‡§µ‡§ø‡§Æ‡§æ‡§® (Flight)
                        {% elif travel.type == 'train' %}
                            <i class="fas fa-train"></i> ‡§∞‡•á‡§≤ (Train)
                        {% else %}
                            <i class="fas fa-bus"></i> ‡§¨‡§∏ (Bus)
                        {% endif %}
                    </span>
                    {{ travel.travel_id }}
                </h4>
                <div class="h4 text-warning mb-0">‚Çπ{{ travel.price }}</div>
            </div>
            
            <div class="card-body">
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="departure-info p-3 border-start border-primary border-4 bg-light rounded">
                            <h3 class="h5 text-primary mb-2">‡§™‡•ç‡§∞‡§∏‡•ç‡§•‡§æ‡§® (From)</h3>
                            <h2 class="gradient-text">{{ travel.source }}</h2>
                            <p class="mb-0">
                                <strong>‡§™‡•ç‡§∞‡§∏‡•ç‡§•‡§æ‡§® (Departure):</strong><br>
                                {{ travel.departure_date|date:"l, d F Y" }}<br>
                                <span class="text-primary fw-bold">{{ travel.departure_time|time:"g:i A" }}</span>
                            </p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="arrival-info p-3 border-start border-success border-4 bg-light rounded">
                            <h3 class="h5 text-success mb-2">‡§ó‡§Ç‡§§‡§µ‡•ç‡§Ø (To)</h3>
                            <h2 class="gradient-text">{{ travel.destination }}</h2>
                            <p class="mb-0">
                                <strong>‡§Ü‡§ó‡§Æ‡§® (Arrival):</strong><br>
                                {{ travel.arrival_date|date:"l, d F Y" }}<br>
                                <span class="text-success fw-bold">{{ travel.arrival_time|time:"g:i A" }}</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="info-card text-center p-3 border rounded">
                            <i class="fas fa-users fa-2x text-info mb-2"></i>
                            <h5 class="text-muted">‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§∏‡•Ä‡§ü‡•á‡§Ç (Available Seats)</h5>
                            <p class="h4 {% if travel.available_seats < 5 %}text-warning{% else %}text-success{% endif %}">
                                {{ travel.available_seats }} / {{ travel.total_seats }}
                            </p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="info-card text-center p-3 border rounded">
                            <i class="fas fa-rupee-sign fa-2x text-success mb-2"></i>
                            <h5 class="text-muted">‡§™‡•ç‡§∞‡§§‡§ø ‡§∏‡•Ä‡§ü ‡§ï‡§ø‡§∞‡§æ‡§Ø‡§æ (Price per seat)</h5>
                            <p class="h4 price-highlight">‚Çπ{{ travel.price }}</p>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="info-card text-center p-3 border rounded">
                            <i class="fas fa-check-circle fa-2x text-primary mb-2"></i>
                            <h5 class="text-muted">‡§∏‡•ç‡§•‡§ø‡§§‡§ø (Status)</h5>
                            <p class="h5">
                                {% if travel.is_available %}
                                    <span class="badge bg-success">‡§â‡§™‡§≤‡§¨‡•ç‡§ß (Available)</span>
                                {% else %}
                                    <span class="badge bg-danger">‡§Ö‡§®‡•Å‡§™‡§≤‡§¨‡•ç‡§ß (Not Available)</span>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>
                
                {% if travel.available_seats < 5 and travel.available_seats > 0 %}
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    ‡§ï‡•á‡§µ‡§≤ {{ travel.available_seats }} ‡§∏‡•Ä‡§ü‡•á‡§Ç ‡§¨‡§ö‡•Ä ‡§π‡•à‡§Ç! ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§
                    <br><small>Only {{ travel.available_seats }} seats remaining! Book quickly.</small>
                </div>
                {% endif %}
            </div>
            
            <div class="card-footer bg-transparent">
                <div class="d-flex gap-2">
                    <a href="{% url 'travel_list' %}" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left"></i> ‡§µ‡§æ‡§™‡§∏ ‡§ñ‡•ã‡§ú‡•á‡§Ç (Back to Search)
                    </a>
                    
                    {% if travel.is_available %}
                        {% if user.is_authenticated %}
                        <a href="{% url 'book_travel' travel.id %}" class="btn btn-primary">
                            <i class="fas fa-ticket-alt"></i> ‡§Ø‡§π ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§¨‡•Å‡§ï ‡§ï‡§∞‡•á‡§Ç (Book This Travel)
                        </a>
                        {% else %}
                        <a href="{% url 'login' %}" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç (Login to Book)
                        </a>
                        {% endif %}
                    {% else %}
                    <button class="btn btn-secondary" disabled>
                        <i class="fas fa-times"></i> ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç (Not Available)
                    </button>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="fas fa-info-circle"></i> ‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (Travel Information)
                </h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2">
                        <strong>‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞ (Travel Type):</strong> 
                        {% if travel.type == 'flight' %}
                            ‡§µ‡§ø‡§Æ‡§æ‡§® (Flight) ‚úàÔ∏è
                        {% elif travel.type == 'train' %}
                            ‡§∞‡•á‡§≤ (Train) üöÜ
                        {% else %}
                            ‡§¨‡§∏ (Bus) üöå
                        {% endif %}
                    </li>
                    <li class="mb-2">
                        <strong>‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ID (Travel ID):</strong> {{ travel.travel_id }}
                    </li>
                    <li class="mb-2">
                        <strong>‡§Ø‡§æ‡§§‡•ç‡§∞‡§æ ‡§∏‡§Æ‡§Ø (Duration):</strong>
                        {% with departure_datetime=travel.departure_date|date:"Y-m-d "|add:travel.departure_time|time:"H:i:s" %}
                        {% with arrival_datetime=travel.arrival_date|date:"Y-m-d "|add:travel.arrival_time|time:"H:i:s" %}
                        <!-- Duration calculation would need custom template tag -->
                        ‡§∏‡§Æ‡§Ø ‡§¶‡•á‡§ñ‡•á‡§Ç (Check times above)
                        {% endwith %}
                        {% endwith %}
                    </li>
                </ul>
                
                <hr>
                
                <h6 class="text-primary">‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§®‡•ã‡§ü‡•ç‡§∏ (Important Notes):</h6>
                <ul class="small text-muted">
                    <li>‡§™‡•ç‡§∞‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á 24 ‡§ò‡§Ç‡§ü‡•á ‡§™‡§π‡§≤‡•á ‡§§‡§ï ‡§∞‡§¶‡•ç‡§¶‡•Ä‡§ï‡§∞‡§£ ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§π‡•à<br>
                        <small>Cancellation allowed up to 24 hours before departure</small>
                    </li>
                    <li>‡§™‡•ç‡§∞‡§∏‡•ç‡§•‡§æ‡§® ‡§∏‡•á 30 ‡§Æ‡§ø‡§®‡§ü ‡§™‡§π‡§≤‡•á ‡§™‡§π‡•Å‡§Ç‡§ö‡•á‡§Ç<br>
                        <small>Please arrive 30 minutes before departure</small>
                    </li>
                    <li>‡§¨‡•ã‡§∞‡•ç‡§°‡§ø‡§Ç‡§ó ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡•à‡§ß ID ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï<br>
                        <small>Valid ID required for boarding</small>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
